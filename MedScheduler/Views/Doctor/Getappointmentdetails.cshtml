@using MedScheduler.Models;
@using System.Globalization;
@{
    Layout = "~/Views/Shared/_DoctorLayoutPage.cshtml";

}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
@model List<SlotBooking>

@if (Model != null && Model.Count > 0)
{
    <h3 class="text-primary fs-4 fw-bold">Old appointments</h3>

    <table class="table table-dark table-hover">
        <thead>
            <tr>
                <th class="text-secondary">Slot id</th>
                <th class="text-secondary">Patient id</th>
                <th class="text-secondary">First name</th>
                <th class="text-secondary">Last name</th>
                <th class="text-secondary">Age</th>
                <th class="text-secondary">Gender</th>
                <th class="text-secondary">Phone</th>
                <th class="text-secondary">Message</th>
                <th class="text-secondary">Date of appointment</th>
                <th class="text-secondary">Time of appointment</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var appointment in ViewBag.AppointmentDetails)
            {
                DateTime appointmentDate = DateTime.ParseExact(appointment.Date_of_appointment, "yyyy-MM-dd", CultureInfo.InvariantCulture);
                if (appointmentDate < DateTime.Now.Date)
                {
                    <tr>
                        <td class="w-25">@appointment.AppointmentId</td>
                        <td class="w-25">@appointment.PatientId</td>
                        <td>@appointment.Firstname</td>
                        <td>@appointment.Lastname</td>
                        <td>@appointment.Age</td>
                        <td>@appointment.Gender</td>
                        <td class="w-25">@appointment.Phone</td>
                        <td class="w-25">@appointment.Message</td>
                        <td class="w-25">@appointment.Date_of_appointment</td>
                        <td class="w-25">@appointment.Time_of_appointment</td>
                    </tr>
                }
                else
                {
                    <tr>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                    </tr>
                }
            }
        </tbody>
    </table>


    <h3 class="text-danger fs-4 fw-bold">New appointments</h3>
    <table class="table table-dark table-hover">
        <thead>
            <tr>
                <th class="text-secondary">Slot id</th>
                <th class="text-secondary">Patient id</th>
                <th class="text-secondary">First name</th>
                <th class="text-secondary">Last name</th>
                <th class="text-secondary">Age</th>
                <th class="text-secondary">Gender</th>
                <th class="text-secondary">Phone</th>
                <th class="text-secondary">Message</th>
                <th class="text-secondary">Date of appointment</th>
                <th class="text-secondary">Time of appointment</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var appointment in ViewBag.AppointmentDetails)
            {
                DateTime appointmentDate = DateTime.ParseExact(appointment.Date_of_appointment, "yyyy-MM-dd", CultureInfo.InvariantCulture);
                if (appointmentDate >= DateTime.Now.Date)
                {
                    <tr>
                        <td>@appointment.AppointmentId</td>
                        <td>@appointment.PatientId</td>
                        <td>@appointment.Firstname</td>
                        <td>@appointment.Lastname</td>
                        <td>@appointment.Age</td>
                        <td>@appointment.Gender</td>
                        <td>@appointment.Phone</td>
                        <td>@appointment.Message</td>
                        <td>@appointment.Date_of_appointment</td>
                        <td>@appointment.Time_of_appointment</td>
                    </tr>
                }
                else
                {
                    <tr>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                        <td class="text-center">Null</td>
                    </tr>
                }
            }
        </tbody>
    </table>
}
else
{
    <p>No appointment details available.</p>
}
<div class="btn btn-warning ">
    @Html.ActionLink("Back", "ViewProfieDoctor", new {@class="nav-link fs-5"})
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
